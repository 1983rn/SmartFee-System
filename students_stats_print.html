{% extends 'base.html' %}

{% block title %}Student Statistics - {{ school_name }}{% endblock %}

{% block content %}
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Student Statistics by Class</h3>
    <div>
      <button class="btn btn-primary" onclick="window.print()"><i class="fas fa-print me-1"></i>Print</button>
    </div>
  </div>

  <div class="card">
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Class</th>
              <th>Boys</th>
              <th>Girls</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            {% for class_name, class_stats in stats.items() %}
            <tr>
              <td><strong>{{ class_name }}</strong></td>
              <td>{{ class_stats.boys }}</td>
              <td>{{ class_stats.girls }}</td>
              <td><strong>{{ class_stats.total }}</strong></td>
            </tr>
            {% endfor %}
            <tr class="table-primary">
              <td><strong>TOTAL</strong></td>
              <td><strong>{{ total_boys }}</strong></td>
              <td><strong>{{ total_girls }}</strong></td>
              <td><strong>{{ total_enrollment }}</strong></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// Auto-trigger print when opened in new tab
window.addEventListener('load', function(){
  // small delay to let rendering settle
  setTimeout(function(){ window.print(); }, 250);
});
</script>
{% endblock %}
